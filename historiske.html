<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.js"></script>
    <!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <style type="text/css">
    	html,body { 
    		height: 100%; 
    		margin: 0px; 
    		padding: 0px; 
    	}

    	#hoveddiv {
    		height: 100%
    	}

    	#header {
    		height: 10%;
    		width: 100%;
    		background-color: #f96e5b;
    		display: table;
    	}
    	.navbar-header {
    		background-color: green;
    	}
    	#headerspace {
    		height:20%;
    	}
    	#spanleft {
    		/*display: table-cell;
    		vertical-align: middle;*/
    		font-size: 5vw;
    		color: white;
    		font-family: sans-serif;
    		padding-left: 8px;

    	}
    	#spanright {
    		/*vertical-align: middle;*/
    		float: right;
    		padding-right: 8px;

    	}
    	#spanright a img {
    		height: 80px;
    	}
    	#mapContainer {
    		height: 400px
    	}
    	#mapDiv {
    		height: 80%;
    		width: 100%;
    	}

    	.slider {
		    -webkit-appearance: none;
		    max-width: 80%;
		    height: 25px;
		    float: left;
		    margin-top: 20px;
		    border-radius: 5px;   
		    background: #d3d3d3;
		    outline: none;
		    opacity: 0.7;
		    -webkit-transition: .2s;
		    transition: opacity .2s;
		}

		.slider::-webkit-slider-thumb {
		    -webkit-appearance: none;
		    appearance: none;
		    width: 50px;
		    height: 50px;
		    border-radius: 80%; 
		    background: url('https://image.flaticon.com/icons/svg/179/179526.svg');
		    cursor: pointer;
		}

		.slider::-moz-range-thumb {
		    width: 70px;
		    height: 70px;
		    border-radius: 80%;
		    background: #4CAF50;
		    cursor: pointer;
		}
		.slidecontainer {
			margin-top: 5px;
			width: 100%;
			float: left;
		}

		#aarstallcontainer {
			position: relative;
			float: right;
			width: 20%;
			background-color: white;
			border-radius: 10px;
			border: 3px solid #eb8a82;
			height: 65px;

		}
		#aarstallcontainer p {
			font-family: sans-serif;
			font-size: 3em;
			text-align: center;
		 	margin-top: 4px;
		 	margin-left: 4px;
		 	margin-right: 4px;
		 	vertical-align: middle;
		 	/*display: inline-block;*/
		}
		

    </style>

</head>

<body>
	<div id="hoveddiv">


		<div id="header">
			<div id="headerspace"></div>
			<span id="spanleft">Historiske ortofoto</span>
			<span id="spanright">
				<a href="http://www.Sarpsborg.com">
					<img src="http://www.sarpsborg.com/globalassets/blokker-i-artikler/layout/img/sarpsborg-kommune.png">
				</a>
			</span>
		</div>


	   	<div id="mapDiv">  </div>




		<div class="slidecontainer">
		  	<input type="range" min="1" max="4" value="1" class="slider" id="myRange">
		  	<div id="aarstallcontainer"><p><b>År: </b><span id="aarstall"></span></p></div>
		</div>
	</div>

    <br>
    

    <script type="text/javascript">
    	var googleMLayer = L.tileLayer(
           'http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}', {
           attribution: 'Map data &copy; ' + '<a href="http://maps.google.com">Google Maps</a>',
           maxZoom: 20,
           subdomains:['mt0','mt1','mt2','mt3']
        });

        var map = L.map(mapDiv, {
            center: [ 59.27668, 11.09955],
            minZoom: 1,
            zoom: 13,
            maxZoom:18,
            //Legg til lag her for å vise når appen starter
            layers: [googleMLayer]
        });  

        $(window).on("resize", function () { $("#map").height($(window).height()); map.invalidateSize(); }).trigger("resize");

        var bakgrunnskart = {"Google Street": googleMLayer};

		basemaps = {
		    '1947': L.tileLayer.wms('http://waapi.webatlas.no/wms-orto-hist/?APITOKEN=29045b22-fd9b-4ee7-8c20-95da7094ea1f&', {
		    	layers: 'Sarpsborg-1947', format:'image/png'
		    }),

		    '1952': L.tileLayer.wms('http://waapi.webatlas.no/wms-orto-hist/?APITOKEN=29045b22-fd9b-4ee7-8c20-95da7094ea1f&', {
		    	layers: 'Sarpsborg-1952', format:'image/png'
		    }),

		    '1963': L.tileLayer.wms('http://waapi.webatlas.no/wms-orto-hist/?APITOKEN=29045b22-fd9b-4ee7-8c20-95da7094ea1f&', {
		        layers: 'Sarpsborg-1963', format:'image/png'
		    }),

		    '1978': L.tileLayer.wms('http://waapi.webatlas.no/wms-orto-hist/?APITOKEN=29045b22-fd9b-4ee7-8c20-95da7094ea1f&', {
		        layers: 'Sarpsborg-1978', format:'image/png'
		    })
		};
		var liste = ["1947", "1952", "1963", "1978"];

		L.control.layers(bakgrunnskart, basemaps).addTo(map);

		var slider = document.getElementById("myRange");

		var output = document.getElementById("aarstall");
		output.innerHTML = slider.value;



		slider.oninput = function() {
			//For-løkka iterer gjennom alle lagnavnene hver gang du beveger slideren
			for (var i = 0; i < liste.length; i++) {
				//If setningen sjekker om det aktuelle laget finnes i kartet
				//Dersom laget finnes i kartet fjernes det, slik at ingen lag er aktive når et nytt lag skal legges inn etter for-løkken
				if (map.hasLayer(basemaps[liste[i]])) {
				map.removeLayer(basemaps[liste[i]])
				}
			};
			
			var verdi = this.value-1;
			//Skriver inn i websiden hvilket lag som nå er aktivt
			output.innerHTML = liste[verdi];
			var objektnavn = liste[verdi];
			//Legger til det aktuelle årstallet. 
			basemaps[objektnavn].addTo(map);
		};




    </script>

</body>

</html>
